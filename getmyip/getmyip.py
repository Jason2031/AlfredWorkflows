#!/usr/bin/python# -*- coding: utf-8 -*-import re, urllib2,sysfrom workflow import Workflowdef main(wf):    url="http://1212.ip138.com/ic.asp"    opener = urllib2.urlopen(url)    if url == opener.geturl():        str = unicode(opener.read(), 'gb2312')    str = str.split('<center>')[1].split('</center>')[0]    # a little tricky    ip = re.search('\d+\.\d+\.\d+\.\d+', str).group(0)    source = str.split(u'来自：')[1]    wf.add_item(title=ip,subtitle=source,icon='icon.png')    wf.send_feedback()if __name__=='__main__':    wf=Workflow()    sys.exit(wf.run(main))